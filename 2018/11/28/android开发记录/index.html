<!doctype html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.0" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="android," />





  <link rel="alternate" href="/atom.xml" title="思 见" type="application/atom+xml" />




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.0" />






<meta name="description" content="随着开发深入，又要开始用Java来开发android了，上次没有总结出一篇像样的android博客出来，这次补上，随着开发陆续完善。">
<meta name="keywords" content="android">
<meta property="og:type" content="article">
<meta property="og:title" content="android开发记录">
<meta property="og:url" content="http://yoursite.com/2018/11/28/android开发记录/index.html">
<meta property="og:site_name" content="思 见">
<meta property="og:description" content="随着开发深入，又要开始用Java来开发android了，上次没有总结出一篇像样的android博客出来，这次补上，随着开发陆续完善。">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="http://yoursite.com/2018/11/28/android开发记录/活动栈.png">
<meta property="og:image" content="http://yoursite.com/2018/11/28/android开发记录/activity生命周期.png">
<meta property="og:image" content="http://yoursite.com/2018/11/28/android开发记录/常用控件的继承结构.png">
<meta property="og:image" content="http://yoursite.com/2018/11/28/android开发记录/权限申请.png">
<meta property="og:updated_time" content="2019-02-15T08:01:26.530Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="android开发记录">
<meta name="twitter:description" content="随着开发深入，又要开始用Java来开发android了，上次没有总结出一篇像样的android博客出来，这次补上，随着开发陆续完善。">
<meta name="twitter:image" content="http://yoursite.com/2018/11/28/android开发记录/活动栈.png">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":0,"b2t":false,"scrollpercent":false},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/2018/11/28/android开发记录/"/>





  <title> android开发记录 | 思 见 </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  














  
  
    
  

  <div class="container one-collumn sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">思 见</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/11/28/android开发记录/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="sun">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/curiosity.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="思 见">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                android开发记录
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-11-28T18:25:37+08:00">
                2018-11-28
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/总结/" itemprop="url" rel="index">
                    <span itemprop="name">总结</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        <p> 随着开发深入，又要开始用Java来开发android了，上次没有总结出一篇像样的android博客出来，这次补上，随着开发陆续完善。</p>
<a id="more"></a>
<h1 id="基础"><a href="#基础" class="headerlink" title="基础"></a>基础</h1><h2 id="对于android与react开发的对比"><a href="#对于android与react开发的对比" class="headerlink" title="对于android与react开发的对比"></a>对于android与react开发的对比</h2><ul>
<li><p>相同：<br>android在开发时，最基础的过程是布局、activity、view，其中布局用于确定一个页面中有哪些组件以及他们之间的位置关系; activity通过findViewById得到布局中的view(组件)，来进行控制，包括获取数据已经控制显示数据; 对于view的事件（如button的点击），可以在布局中去指定，也可以在activity中去指定响应函数。 </p>
<p>对比react中的开发，布局对应着app.js中对不同组件组合以及css中布局的控制; activity中内容像是组件中的控制，包括document.getElementById()来获取元素，以及onClick（）响应等，包括组件之间的通信，以及与后端的通信，都可以在activity中去实现（不过大多都将module层抽象出来）; android中的view跟标签有些类似，当然可以自建view 对应着fragment，对应着react中的component(组建)</p>
</li>
<li><p>区别：<br>react的数据流是自上而下的流动， 而android中数据流可以自由流动;<br>react中大的封装用页面，且页面之间基本无法通信， 页面之间的封装用component; 在android中教为自由，毕竟大家都在一个进程中，数据是共享的，封装用布局来完成，页面控制由activity来完成。<br>react中component封装了view与对view的控制，而且本身也当作view来使用，是一种组合模式; 在android中将显示由基本的view与布局来完成，控制由activity来完成。</p>
<h2 id="Context"><a href="#Context" class="headerlink" title="Context"></a>Context</h2></li>
</ul>
<h2 id="Application"><a href="#Application" class="headerlink" title="Application"></a>Application</h2><p>application的创建在MainActivity之前</p>
<h2 id="activity"><a href="#activity" class="headerlink" title="activity"></a>activity</h2><ul>
<li><p>问题<br>在返回401时去强制登录时，发现由于一个activity中相应调用了2次network，结果会启动2次LoginActivity，结果是启动了2次?<br>LoginActivity中使用android:launchMode=”singleTask”配置解决。</p>
</li>
<li><p>lanchMode<br>lanchMode规定了activity创建时的方式:<br>1.standard ,每次都会重新创建activity<br>2.singleTop, 在堆栈Top时，按理应该只创建一次，正符合现在的情况，但不好使<br>3.singleTask， 每个Task只有一个<br>4.singleInstance， 只有一个</p>
</li>
</ul>
<h2 id="task"><a href="#task" class="headerlink" title="task"></a>task</h2><p>task是一个具有栈结构的对象，一个task可以管理多个Activity，启动一个应用，也就是创建一个与之对应的task</p>
<h2 id="Intent"><a href="#Intent" class="headerlink" title="Intent"></a>Intent</h2><ul>
<li>方式<ol>
<li>显式</li>
<li>隐式</li>
</ol>
</li>
</ul>
<h2 id="布局"><a href="#布局" class="headerlink" title="布局"></a>布局</h2><h2 id="fragment"><a href="#fragment" class="headerlink" title="fragment"></a>fragment</h2><h2 id="切换动画"><a href="#切换动画" class="headerlink" title="切换动画"></a>切换动画</h2><p>overridePendingTransition<br><a href="https://blog.csdn.net/bufanni12/article/details/26453725" target="_blank" rel="noopener">切换动画</a></p>
<h1 id="活动栈与生命周期"><a href="#活动栈与生命周期" class="headerlink" title="活动栈与生命周期"></a>活动栈与生命周期</h1><p><img src="活动栈.png" alt="活动栈"></p>
<p><img src="activity生命周期.png" alt="栈的结构"></p>
<h1 id="组件"><a href="#组件" class="headerlink" title="组件"></a>组件</h1><h2 id="组件的继承结构"><a href="#组件的继承结构" class="headerlink" title="组件的继承结构"></a>组件的继承结构</h2><p><img src="常用控件的继承结构.png" alt="常用控件的继承结构"></p>
<h2 id="向上按钮"><a href="#向上按钮" class="headerlink" title="向上按钮"></a>向上按钮</h2><h2 id="下拉框-Spinner"><a href="#下拉框-Spinner" class="headerlink" title="下拉框 Spinner"></a>下拉框 Spinner</h2><h2 id="弹窗-AlertDialog"><a href="#弹窗-AlertDialog" class="headerlink" title="弹窗 AlertDialog"></a>弹窗 AlertDialog</h2><h2 id="BottomNavigation"><a href="#BottomNavigation" class="headerlink" title="BottomNavigation"></a>BottomNavigation</h2><ul>
<li><p>activity方式<br>一般的BottomNavigation在使用过程中，都是用fragment来切换界面，而现在是在activity中实现的，使用过程中，在每一个activity中，都增加一个BottomNavigation视图，在每一个BottomNavigation中，都去写startActivity()。但这样就带来一个问题：每次点击返回时，返回页面的底部导航不会复位。</p>
<p>从stockoverflow中，找到了一种处理方案:</p>
<ol>
<li>在布局xml中，将BottomNavigation独立到一个xml中，其他的xml通过include的方式来引入此xml</li>
<li>抽象出一个BaseActivity,封装对BottomNavigation的操作： 选择item，更新item，主要是将content对应的ViewId，以及NavigationMenuId,封装成抽象函数，由具体的Activity来实现。</li>
<li>具体的Acivity 从BaseActivity中继承，并实现2个接口，即可实现操作。</li>
</ol>
<p>ps： 从根本上解决问题的是include方式来引入BottomNavigation， 并通过继承的方式来完成操作的封装，这里使用的模式，类似于模板模式。</p>
<p>原文如下：<br><a href="https://stackoverflow.com/questions/48479505/fragments-or-activities-with-persistent-bottomnavigationview" target="_blank" rel="noopener">BottomNavigation</a> </p>
</li>
<li><p>超过3个按钮的处理</p>
</li>
</ul>
<h2 id="WebView"><a href="#WebView" class="headerlink" title="WebView"></a>WebView</h2><p>很多App内置了Web网页，如淘宝、京东，这些实现都是使用WebView的组件来实现的。原文：<br><a href="https://blog.csdn.net/carson_ho/article/details/52693322" target="_blank" rel="noopener">WebView</a></p>
<h3 id="作用"><a href="#作用" class="headerlink" title="作用"></a>作用</h3><ul>
<li>显示和渲染Web页面</li>
<li>直接使用html作布局</li>
<li>可和JavaScript交互调用</li>
</ul>
<h3 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h3><h1 id="权限"><a href="#权限" class="headerlink" title="权限"></a>权限</h1><p>requestPermissions<br><a href="https://www.jianshu.com/p/33a31c967d5e" target="_blank" rel="noopener">requestPermissions</a></p>
<p><img src="权限申请.png" alt="权限申请"></p>
<ul>
<li><p>背景<br>安装时权限<br>运行时权限</p>
</li>
<li><p>分类<br>正常权限<br>危险权限</p>
</li>
<li><p>适配API<br>在Android M的SDK中，在Activity中新增了进行运行时权限适配的三个API：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">requestPermissions</span><span class="params">(String[] permissions, <span class="keyword">int</span> requestCode)</span><span class="comment">//请求权限，参数可以是一个权限或者是多个。</span></span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">onRequestPermissionsResult</span><span class="params">(<span class="keyword">int</span> requestCode, String[] permissions, <span class="keyword">int</span>[] grantResults)</span><span class="comment">//请求权限之后的回调。</span></span></span><br><span class="line"><span class="function"><span class="keyword">boolean</span> <span class="title">shouldShowRequestPermissionRationale</span><span class="params">(String permission)</span><span class="comment">//是否有必要 告诉用户我们需要这个权限的原因。</span></span></span><br></pre></td></tr></table></figure>
<p>Context中添加了一个API：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">checkSelfPermission</span><span class="params">(String permission)</span><span class="comment">//用来检测当前应用是否具有某个权限。</span></span></span><br></pre></td></tr></table></figure>
</li>
<li><p>官方版本</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">  <span class="comment">// 检查是否已经具有权限</span></span><br><span class="line"><span class="keyword">if</span> (ContextCompat.checkSelfPermission(thisActivity,Manifest.permission.READ_CONTACTS)</span><br><span class="line">    != PackageManager.PERMISSION_GRANTED) &#123;</span><br><span class="line">    <span class="comment">// 是否需要告诉用户我们为什么需要这个权限</span></span><br><span class="line">    <span class="keyword">if</span> (ActivityCompat.shouldShowRequestPermissionRationale(thisActivity,</span><br><span class="line">     Manifest.permission.READ_CONTACTS)) &#123;</span><br><span class="line">     <span class="comment">//弹出信息，告诉用户我们为啥需要权限</span></span><br><span class="line"></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">//直接获取权限</span></span><br><span class="line">    ActivityCompat.requestPermissions(thisActivity,</span><br><span class="line">            <span class="keyword">new</span> String[]&#123;Manifest.permission.READ_CONTACTS&#125;,</span><br><span class="line">            MY_PERMISSIONS_REQUEST_READ_CONTACTS);</span><br><span class="line">    <span class="comment">//用户授权的结果会回调到FragmentActivity的onRequestPermissionsResult</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;<span class="keyword">else</span> &#123;</span><br><span class="line"> <span class="comment">//已经拥有授权</span></span><br><span class="line"> readContacts();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>在onRequestPermissionsResult中：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onRequestPermissionsResult</span><span class="params">(<span class="keyword">int</span> requestCode,</span></span></span><br><span class="line"><span class="function"><span class="params">   String permissions[], <span class="keyword">int</span>[] grantResults)</span> </span>&#123;</span><br><span class="line"> <span class="keyword">switch</span> (requestCode) &#123;</span><br><span class="line">   <span class="keyword">case</span> MY_PERMISSIONS_REQUEST_READ_CONTACTS: &#123;</span><br><span class="line">       <span class="keyword">if</span> (grantResults.length &gt; <span class="number">0</span></span><br><span class="line">           &amp;&amp; grantResults[<span class="number">0</span>] == PackageManager.PERMISSION_GRANTED) &#123;</span><br><span class="line">           readContacts();</span><br><span class="line">       &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">//权限没能授权通过，可以考虑弹个toast告诉用户</span></span><br><span class="line">       &#125;</span><br><span class="line">       <span class="keyword">return</span>;</span><br><span class="line">   &#125;</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h1 id="存储"><a href="#存储" class="headerlink" title="存储"></a>存储</h1><p><a href="https://www.jianshu.com/p/904042f8211c" target="_blank" rel="noopener">存储</a></p>
<p><a href="https://blog.csdn.net/nugongahou110/article/details/48154859" target="_blank" rel="noopener">存储</a></p>
<h1 id="SQLite"><a href="#SQLite" class="headerlink" title="SQLite"></a>SQLite</h1><h2 id="onCreate与onUpgrade"><a href="#onCreate与onUpgrade" class="headerlink" title="onCreate与onUpgrade"></a>onCreate与onUpgrade</h2><h1 id="Retrifit"><a href="#Retrifit" class="headerlink" title="Retrifit"></a>Retrifit</h1><h2 id="Interceptor"><a href="#Interceptor" class="headerlink" title="Interceptor"></a>Interceptor</h2><h2 id="Call同步与异步"><a href="#Call同步与异步" class="headerlink" title="Call同步与异步"></a>Call同步与异步</h2><h2 id="http通信的转换器"><a href="#http通信的转换器" class="headerlink" title="http通信的转换器"></a>http通信的转换器</h2><h1 id="图表：MPAndroidChart"><a href="#图表：MPAndroidChart" class="headerlink" title="图表：MPAndroidChart"></a>图表：MPAndroidChart</h1><h2 id="引入MPAndroidChart"><a href="#引入MPAndroidChart" class="headerlink" title="引入MPAndroidChart"></a>引入MPAndroidChart</h2><p>在工程中引入MPAndroidChart模块，需要注意2点：</p>
<p>在外层的build.gradle下的allprojects中增加：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">allprojects &#123;</span><br><span class="line">    repositories &#123;</span><br><span class="line">        google()</span><br><span class="line">        jcenter()</span><br><span class="line">        maven &#123; url &quot;https://jitpack.io&quot; &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>在内层app的build.gradle下的denpendencies下增加：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">dependencies &#123;</span><br><span class="line">    implementation &apos;com.github.PhilJay:MPAndroidChart:v3.0.3&apos;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>这里用imlementation或者api，不用compile， compile已经弃用，并且与现在的api相同，imlementation只在引入的包里有用，而在其上层里，无用。</p>
<h2 id="图表的使用"><a href="#图表的使用" class="headerlink" title="图表的使用"></a>图表的使用</h2><ul>
<li><p>布局</p>
<p>在activity或者fragment的布局文件中，引入图表，如下图，引入了柱状图：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">com.github.mikephil.charting.charts.BarChart</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:id</span>=<span class="string">"@+id/chart_single_month"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">"0dp"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_weight</span>=<span class="string">"1"</span></span></span><br><span class="line"><span class="tag">  /&gt;</span></span><br></pre></td></tr></table></figure>
<p>坐标轴的处理，下边的使用就将BarChart当成view使用即可，调整坐标轴、图例等，并将数据放入，触发更新即可。</p>
</li>
<li><p>坐标轴的处理</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> BarChart mBarChart;</span><br><span class="line">mBarChart = findViewById(R.id.chart_single_month);</span><br><span class="line"></span><br><span class="line">XAxis xAxis = mBarChart.getXAxis();             <span class="comment">// 获取横轴</span></span><br><span class="line">xAxis.setPosition(XAxis.XAxisPosition.BOTTOM);  <span class="comment">// 设置位置</span></span><br><span class="line"></span><br><span class="line">IAxisValueFormatter xAxisFormatter = <span class="keyword">new</span> DayAxisValueFormatter();</span><br><span class="line">xAxis.setValueFormatter(xAxisFormatter);       <span class="comment">// 设置横轴的标志</span></span><br></pre></td></tr></table></figure>
<p>横轴的标志，是通过IAxisValueFormatter接口来实现的，需要实现getFormattedValue()接口，它传入的值是数值中的x坐标值。如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="class"><span class="keyword">class</span> <span class="title">DayAxisValueFormatter</span> <span class="keyword">implements</span> <span class="title">IAxisValueFormatter</span></span></span><br><span class="line"><span class="class">  </span>&#123;</span><br><span class="line">      <span class="meta">@Override</span></span><br><span class="line">      <span class="function"><span class="keyword">public</span> String <span class="title">getFormattedValue</span><span class="params">(<span class="keyword">float</span> value, AxisBase axis)</span> </span>&#123;</span><br><span class="line">          <span class="keyword">return</span> String.valueOf((<span class="keyword">int</span>) value + <span class="string">"月"</span>);</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>点击事件的处理<br>点击事件，显示的就是MarkerView</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">XYMarkerView mv = <span class="keyword">new</span> XYMarkerView(<span class="keyword">this</span>, xAxisFormatter);</span><br><span class="line">mv.setChartView(mBarChart); <span class="comment">// For bounds control</span></span><br><span class="line">mBarChart.setMarker(mv); <span class="comment">// Set the marker to the chart</span></span><br></pre></td></tr></table></figure>
<p>这个XYMarkView中需要填充view，并实现 refreshContent（）接口,在这个接口中，实现点击内容显示的调整。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">XYMarkerView</span> <span class="keyword">extends</span> <span class="title">MarkerView</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">XYMarkerView</span><span class="params">(Context context, IAxisValueFormatter xAxisValueFormatter)</span> </span>&#123;</span><br><span class="line">      <span class="keyword">super</span>(context, R.layout.custom_marker_view);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">     <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">refreshContent</span><span class="params">(Entry e, Highlight highlight)</span> </span>&#123;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>图例</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Legend l = mBarChart.getLegend();</span><br><span class="line">l.setVerticalAlignment(Legend.LegendVerticalAlignment.TOP);</span><br><span class="line">l.setHorizontalAlignment(Legend.LegendHorizontalAlignment.CENTER);</span><br><span class="line">l.setOrientation(Legend.LegendOrientation.HORIZONTAL);</span><br><span class="line">l.setForm(Legend.LegendForm.SQUARE);</span><br></pre></td></tr></table></figure>
<p>设置图例, 水平位置等。</p>
</li>
<li><p>设置数据</p>
<h1 id="websocket"><a href="#websocket" class="headerlink" title="websocket"></a>websocket</h1><h1 id="定位"><a href="#定位" class="headerlink" title="定位"></a>定位</h1><h1 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h1></li>
<li><p>弱引用<br>在其他util中持有activity 时，使用弱引用，解决内存泄漏问题</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> WeakReference&lt;Activity&gt; mWeakActivity;</span><br></pre></td></tr></table></figure>
</li>
<li><p>尾调用<br>在单例中， 相应函数最后都返回instance即可</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> KbPermission <span class="title">with</span><span class="params">(@NonNull Activity activity)</span> </span>&#123;</span><br><span class="line">     instance.setActivity(activity);</span><br><span class="line">     <span class="keyword">return</span> instance;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h1 id="开发记录"><a href="#开发记录" class="headerlink" title="开发记录"></a>开发记录</h1><h2 id="关于打包成apk"><a href="#关于打包成apk" class="headerlink" title="关于打包成apk"></a>关于打包成apk</h2><p><a href="https://www.jianshu.com/p/7e5b1bacc35c" target="_blank" rel="noopener">打包</a></p>
<h2 id="关于高德地图key值的处理"><a href="#关于高德地图key值的处理" class="headerlink" title="关于高德地图key值的处理"></a>关于高德地图key值的处理</h2><p><a href="https://lbs.amap.com/faq/top/hot-questions/249" target="_blank" rel="noopener">高德地图key</a></p>
<h2 id="外部存储的使用与照片"><a href="#外部存储的使用与照片" class="headerlink" title="外部存储的使用与照片"></a>外部存储的使用与照片</h2><p><a href="https://www.jianshu.com/p/904042f8211c" target="_blank" rel="noopener">照片</a></p>
<p><a href="https://blog.csdn.net/nugongahou110/article/details/48154859" target="_blank" rel="noopener">照片</a></p>
<h2 id="android崩溃的处理方式"><a href="#android崩溃的处理方式" class="headerlink" title="android崩溃的处理方式"></a>android崩溃的处理方式</h2><p><a href="https://blog.csdn.net/l_lhc/article/details/52108474" target="_blank" rel="noopener">android崩溃的处理方式</a></p>
<h2 id="MVVM模型：databinding"><a href="#MVVM模型：databinding" class="headerlink" title="MVVM模型：databinding"></a>MVVM模型：databinding</h2><p><a href="https://www.jianshu.com/p/a898ef83f38c" target="_blank" rel="noopener">MVVM模型</a></p>
<p><a href="https://developer.android.com/topic/libraries/data-binding/" target="_blank" rel="noopener">MVVM模型</a></p>
<p><a href="http://connorlin.github.io/2016/07/02/Android-Data-Binding-%E7%B3%BB%E5%88%97-%E4%B8%80-%E8%AF%A6%E7%BB%86%E4%BB%8B%E7%BB%8D%E4%B8%8E%E4%BD%BF%E7%94%A8/" target="_blank" rel="noopener">MVVM模型</a></p>
<h2 id="RxBus的使用"><a href="#RxBus的使用" class="headerlink" title="RxBus的使用"></a>RxBus的使用</h2><p><a href="https://juejin.im/post/5b5ac0825188251acd0f3777" target="_blank" rel="noopener">RxBus的使用</a></p>

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>


    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/android/" rel="tag"># android</a>
          
        </div>
      

      
        
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2018/11/28/css样式总结/" rel="next" title="CSS布局总结">
                <i class="fa fa-chevron-left"></i> CSS布局总结
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2018/11/29/对js中'{}'的思考/" rel="prev" title="对js中{}的思考">
                对js中{}的思考 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
    </div>
  </div>

          
          </div>
          


          
  <div class="comments" id="comments">
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/curiosity.jpg"
               alt="sun" />
          <p class="site-author-name" itemprop="name">sun</p>
           
              <p class="site-description motion-element" itemprop="description">有一片天空，能留下鸟的痕迹</p>
          
        </div>
        <nav class="site-state motion-element">
        
          
            <div class="site-state-item site-state-posts">
              <a href="/archives">
                <span class="site-state-item-count">50</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-categories">
              <a href="/categories">
                <span class="site-state-item-count">3</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">26</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        
          <div class="feed-link motion-element">
            <a href="/atom.xml" rel="alternate">
              <i class="fa fa-rss"></i>
              RSS
            </a>
          </div>
        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

        


      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#基础"><span class="nav-number">1.</span> <span class="nav-text">基础</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#对于android与react开发的对比"><span class="nav-number">1.1.</span> <span class="nav-text">对于android与react开发的对比</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Context"><span class="nav-number">1.2.</span> <span class="nav-text">Context</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Application"><span class="nav-number">1.3.</span> <span class="nav-text">Application</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#activity"><span class="nav-number">1.4.</span> <span class="nav-text">activity</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#task"><span class="nav-number">1.5.</span> <span class="nav-text">task</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Intent"><span class="nav-number">1.6.</span> <span class="nav-text">Intent</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#布局"><span class="nav-number">1.7.</span> <span class="nav-text">布局</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#fragment"><span class="nav-number">1.8.</span> <span class="nav-text">fragment</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#切换动画"><span class="nav-number">1.9.</span> <span class="nav-text">切换动画</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#活动栈与生命周期"><span class="nav-number">2.</span> <span class="nav-text">活动栈与生命周期</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#组件"><span class="nav-number">3.</span> <span class="nav-text">组件</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#组件的继承结构"><span class="nav-number">3.1.</span> <span class="nav-text">组件的继承结构</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#向上按钮"><span class="nav-number">3.2.</span> <span class="nav-text">向上按钮</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#下拉框-Spinner"><span class="nav-number">3.3.</span> <span class="nav-text">下拉框 Spinner</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#弹窗-AlertDialog"><span class="nav-number">3.4.</span> <span class="nav-text">弹窗 AlertDialog</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#BottomNavigation"><span class="nav-number">3.5.</span> <span class="nav-text">BottomNavigation</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#WebView"><span class="nav-number">3.6.</span> <span class="nav-text">WebView</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#作用"><span class="nav-number">3.6.1.</span> <span class="nav-text">作用</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#小结"><span class="nav-number">3.6.2.</span> <span class="nav-text">小结</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#权限"><span class="nav-number">4.</span> <span class="nav-text">权限</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#存储"><span class="nav-number">5.</span> <span class="nav-text">存储</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#SQLite"><span class="nav-number">6.</span> <span class="nav-text">SQLite</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#onCreate与onUpgrade"><span class="nav-number">6.1.</span> <span class="nav-text">onCreate与onUpgrade</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Retrifit"><span class="nav-number">7.</span> <span class="nav-text">Retrifit</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Interceptor"><span class="nav-number">7.1.</span> <span class="nav-text">Interceptor</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Call同步与异步"><span class="nav-number">7.2.</span> <span class="nav-text">Call同步与异步</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#http通信的转换器"><span class="nav-number">7.3.</span> <span class="nav-text">http通信的转换器</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#图表：MPAndroidChart"><span class="nav-number">8.</span> <span class="nav-text">图表：MPAndroidChart</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#引入MPAndroidChart"><span class="nav-number">8.1.</span> <span class="nav-text">引入MPAndroidChart</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#图表的使用"><span class="nav-number">8.2.</span> <span class="nav-text">图表的使用</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#websocket"><span class="nav-number">9.</span> <span class="nav-text">websocket</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#定位"><span class="nav-number">10.</span> <span class="nav-text">定位</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#其他"><span class="nav-number">11.</span> <span class="nav-text">其他</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#开发记录"><span class="nav-number">12.</span> <span class="nav-text">开发记录</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#关于打包成apk"><span class="nav-number">12.1.</span> <span class="nav-text">关于打包成apk</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#关于高德地图key值的处理"><span class="nav-number">12.2.</span> <span class="nav-text">关于高德地图key值的处理</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#外部存储的使用与照片"><span class="nav-number">12.3.</span> <span class="nav-text">外部存储的使用与照片</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#android崩溃的处理方式"><span class="nav-number">12.4.</span> <span class="nav-text">android崩溃的处理方式</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#MVVM模型：databinding"><span class="nav-number">12.5.</span> <span class="nav-text">MVVM模型：databinding</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#RxBus的使用"><span class="nav-number">12.6.</span> <span class="nav-text">RxBus的使用</span></a></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">sun</span>
</div>


<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Pisces
  </a>
</div>


        

        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    
    
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  




  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.0"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.0"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.0"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.0"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.0"></script>



  



  




	





  





  





  



  
  

  

  

  

  


  

</body>
</html>
